---
# ------------------------------------------------------------------------------
# release => gitlab:release [[
# ------------------------------------------------------------------------------
.gitlab:release:
  extends: .core:defaults
  stage: release
  image: registry.gitlab.com/gitlab-org/release-cli:latest
  script:
    - /bin/true
  release:
    name: "$CI_COMMIT_TAG"
    description: "$CI_COMMIT_TAG"
    tag_name: "$CI_COMMIT_TAG"
    ref: "$CI_COMMIT_SHA"
    assets:
      links:
        - name: 'Pipeline URL'
          url: "$CI_PIPELINE_URL"
          link_type: 'other'
  rules:
    - !reference [".core:rules:not_if", is_not_protected]
    - !reference [".core:rules:if", is_tag]
    - when: never
# ]]

# vim: foldmarker=[[,]] foldmethod=marker
